Отлично. Вот обновлённый и расширенный вариант файла `Info.md`, который отражает новую архитектуру с Nanobot в качестве интеллектуального посредника.

---

# Info.md

## Концепция проекта: Система интеллектуального управления зданиями и пожарной безопасностью

### 1. Назначение и основная идея

Проект представляет собой **систему с интеллектуальным интерфейсом на естественном языке** для учета арендуемых помещений и мониторинга состояния пожарных датчиков в многокорпусном комплексе.

**Ключевая инновация:** Полный отказ от классического графического интерфейса с формами и кнопками в пользу диалога с **ИИ-ассистентом (Nanobot)**. Пользователь взаимодействует с системой через текстовые или голосовые запросы на обычном языке (например: *«Где находится офис компании "СтартТех"?»* или *«Покажи все неисправные датчики в корпусе Б»*). Система понимает запрос, находит информацию и возвращает понятный ответ, дополняя его визуализацией на схемах этажей при необходимости.

### 2. Архитектурный принцип: «Безопасный интеллект»

**Ядро системы — фреймворк Nanobot**, выполняющий роль высокоинтеллектуального посредника. **Важный принцип:** Nanobot не имеет прямого доступа к базе данных или внутренним функциям системы. Всё его взаимодействие с данными и логикой осуществляется исключительно через строго описанный **RESTful API**, предоставляемый Python-бэкендом.

**Аналогия:** Nanobot — это **гениальный аналитик без права подписи**. Он может:
*   Понимать сложные задачи, поставленные руководителем (пользователем).
*   Составлять детальные планы их решения.
*   Просить конкретные отделы компании (API-методы бэкенда) предоставить необходимые справки и данные.
*   Красиво оформлять итоговый отчет для руководителя.

Но он **не может** сам войти в архив (БД) или отдать приказ бухгалтерии. Все исполнительные действия выполняются через официальные, контролируемые каналы (API).

### 3. Компоненты системы

#### 3.1. Хранилище данных (PostgreSQL)
Сервер PostgreSQL хранит всю структурированную информацию:
*   **Корпуса, этажи, помещения** (с привязкой планов-схем).
*   **Арендаторы** и их связь с помещениями.
*   **Пожарные датчики** (тип, серийный номер, местоположение, **ручной статус** — «норма», «неисправен», «тревога» и т.д.).

#### 3.2. Исполнительный слой (Python Backend & API)
Серверное приложение на Python, которое:
*   **Предоставляет RESTful API** для всех операций с системой (получение данных об арендаторах, датчиках, зданиях; обновление статусов; получение схем).
*   **Управляет бизнес-логикой** и выполняет все запросы к базе данных.
*   **Служит единственным шлюзом** для доступа к данным и функциям системы.
*   **Генерирует визуализации** (например, подсвечивает нужное помещение на схеме этажа).

#### 3.3. Интеллектуальный слой (Nanobot)
Локально развернутый ИИ-агент на базе фреймворка Nanobot (работает на **NVIDIA GeForce RTX 5090**). Его задачи:
1.  **Понимание намерения (NLU):** Анализ запроса пользователя на естественном языке.
2.  **Планирование:** Определение последовательности вызовов API бэкенда для получения ответа.
3.  **Оркестрация:** Формирование структурированных запросов к API на основе своего плана.
4.  **Синтез ответа:** Преобразование сырых данных от API в связный, удобочитаемый ответ для пользователя.

#### 3.4. Интерфейс взаимодействия (Frontend / Клиент)
Канал, через который пользователь общается с системой. Возможные варианты:
*   **Telegram-бот:** Наиболее гибкий вариант, поддерживающий текст, голосовые сообщения и отправку изображений (схем).
*   **Десктоп-приложение:** Созданное на Python (например, с использованием Tkinter, PyQt или веб-интерфейса).

**Клиент** общается напрямую только с **Python-бэкендом**, который выступает координатором всего процесса.

### 4. Принцип работы (Поток данных)

1.  **Запрос:** Пользователь отправляет текстовое или голосовое сообщение через клиентское приложение.
2.  **Перенаправление:** Клиент отправляет запрос на соответствующий эндпоинт Python-бэкенда.
3.  **Анализ (Этап 1 — Nanobot):** Бэкенд отправляет запрос пользователя локальному экземпляру Nanobot. Nanobot анализирует его и возвращает **план действий в виде структурированного запроса к API** (например: `{"action": "get_sensors", "filters": {"status": "faulty", "building": "B"}}`).
4.  **Исполнение (Этап 2 — Бэкенд):** Python-бэкенд получает план от Nanobot, **валидирует его**, выполняет необходимые вызовы **своих же внутренних методов или напрямую к БД**, получая фактические данные.
5.  **Синтез (Этап 3 — Nanobot, опционально):** Бэкенд может отправить полученные сырые данные обратно Nanobot для форматирования в удобный для человека текст.
6.  **Ответ:** Бэкенд формирует итоговый пакет (текст + при необходимости бинарные данные изображения со схемой) и отправляет его клиентскому приложению.
7.  **Отображение:** Пользователь видит/слышит четкий ответ от ИИ-ассистента.

### 5. Целевая аудитория и сценарии использования

*   **Служба безопасности / Инженеры:** Мгновенный мониторинг состояния пожарной системы голосовыми командами во время обхода. *«Какие датчики в тревоге на 5 этаже? Покажи на схеме.»*
*   **Менеджеры по аренде / Администрация:** Быстрый поиск информации об арендаторах. *«Найди все помещения, которые освобождаются в следующем месяце»* или *«Где все офисы арендатора "Инновация"?»*.
*   **Сервисные службы:** Планирование работ на основе статусов оборудования. *«Составь список помещений с датчиками в статусе "требует обслуживания" для корпуса 1.»*

### 6. Технологический стек

*   **Бэкенд:** Python (FastAPI / Flask), SQLAlchemy, Pillow (для работы с изображениями).
*   **База данных:** PostgreSQL.
*   **ИИ-агент:** Фреймворк Nanobot, работающий с локальной LLM (например, Qwen2.5, Llama 3.2) на **NVIDIA RTX 5090**.
*   **Клиент:** Python (для Telegram Bot API / библиотеки для GUI) или чистый веб-интерфейс.
*   **Инфраструктура:** Выделенный сервер с белым IP-адресом.

### 7. Ключевые преимущества

1.  **Естественность взаимодействия:** Не нужно учить интерфейс, достаточно уметь формулировать задачу.
2.  **Безопасность и контроль:** Критическая бизнес-логика и данные изолированы от ИИ-компонента.
3.  **Высокая скорость:** Локальная работа ИИ-модели на мощной видеокарте исключает задержки, характерные для облачных API.
4.  **Гибкость запросов:** Возможность задавать комплексные вопросы, объединяющие данные об аренде и безопасности, которые в классической системе потребовали бы ручной сборки отчетов.
5.  **Мультимодальность:** Поддержка голосового ввода и визуального вывода (схемы) делает систему удобной для использования «в поле».
